【VRChat LogMonitor to OSC】

最終更新 : 2022/09/03 風庭ゆい
Support & エディタ拡張 : Rounz
OriginalPlan : デューク


【はじめに】----------------------------

このデータはVRChatのログをリアルタイムで解析し、
OSCでVRChatに送ることでアバターに現在のインスタンス人数と滞在時間を
表示することができるスクリプトとアバターギミックのセットです。

βと書いてある通り試作及び開発版です。
ところどころ作りが荒いですが、
気になった方はぜひ使ってみてください……！


【利用規約】----------------------------

とりあえずいまのところMITLicenseですが、
再配布、販売などは常識の範囲内でお願いします。
仕様が変わる可能性があります(まだβ版ですからね)

また使用する前にプロジェクトのバックアップを取っておいてください。
オブジェクトをセットアップする際にスクリプトを使用するので、
実行する際は自己責任でお願いいたします。


【同梱ファイル】----------------------------

・Log_Monitor_v_X_X_X.exe
　ログを解析しOSC送信をするアプリケーションです。
　VRChatを起動した後に実行します。

・Log_Monitor_Setup_Beta_v_X_X_X.unitypackage
　アバターセットアップ用のUnityPackageです。

・ReadMe.txt
　当データの説明です。
　セットアップ方法などが記載されています。

・texture/Log_Monitor_Texture.ai
　テクスチャのIllustratorデータです。

・texture/Yuis_Unlit_Cutout.shader
　UIに使用しているシェーダーです。
　カスタムUnlitシェーダーであり、汎用的なUI表示に使用できます。

・texture
　unitypackage内で使用しているテクスチャデータです。

・script/demo.exe
　アバターにセットアップしたオブジェクトをテストするアプリです。

・script/server.exe
　VRChatからのOSCデータを閲覧できるアプリです。

・script/OSC_file_Deleter.exe
　VRChatのOSC関係ファイルを削除するアプリです。
　アバターのオブジェクトが動かない場合に実行してください。

・script/python
　コンパイル前のPythonスクリプトです。
　Python3系及びpython-oscが導入してあれば実行できます。


【基本仕様】----------------------------

・マテリアル数 : 9
・パラメータ数 : 2
・メモリ占有数 : 9 bit
・テクスチャ数 : 2

　Unity2019.4.31.f1 動作確認済み
　VRCSDK3-AVATAR-2022.06.03_Public 動作確認済み
　VRChat build 1230 動作確認済み

　EXEアプリケーション
　・Windows 10 21H1 動作確認済み

　Pythonスクリプト
　・Python3系及びpython-osc導入機器にて動作できます


【セットアップ方法】----------------------------

1.VRCSDK3とアバターのパッケージ、その他必要なアセットをシーン上にセットアップしてください。
　既に導入済みのアバターにも適用できます。(その場合バックアップをお願いします)

2.アバターが原点(0,0,0)にあることを確認してください。異なる場合、原点に移動させてください。

3.同梱のUnityPackageをインポートします。

4.メニューバーにYuis_Miniature_Garden内のLog_Monitorがセットアップされますので開きます。

5.セットアップ用ウインドウが開きますので、アバターをセットして[追加]を押します。

6.セットアップ完了です。VRCSDKからVRChatにアップロードしてください。


【使い方】----------------------------

1.Steamのプロパティから、VRChatの起動オプションに[--enable-sdk-log-levels]を追加します。

2.VRChatが起動しているPCでLog_Monitor_v_X_X_X.exeを起動します。

3.セットアップ済みのアバターに着替えて、EXMenuからOSCが有効になっていることを確認します。

4.表示用オブジェクトは自動で表示されます。

5.VRChatがOSCを受信し、オブジェクト部分にデータが反映されます。


【更新履歴】----------------------------

〇2022/08/23 【Beta v1.0.0】
-Boothにてベータ版リリース

〇2022/08/23 【Beta v1.1.0】
-シェーダー同梱によりカメラやミラーに映らなくなりました

〇2022/08/23 【Beta v1.2.0】
-シェーダーのRenderQueueを調整

〇2022/08/25 【Beta v1.3.0】
-シェーダーに透明度設定機能を追加
-スクリプトの動作を大幅変更, パラメータ反映にかかる時間が短くなりました

〇2022/08/26 【Beta v1.3.1】
-アバター変更時やワールド移動時に表示がおかしくなる問題を修正

〇2022/08/27 【Beta v2.0.0】
-150~160cmの身長でもUIの位置が合うように座標を調整
-OSCアプリケーションからの通信が無い時の表示を追加
-滞在時間の更新頻度が上がりました
-OSCアプリケーションの挙動を大幅に変更しました
-VRChatからのOSCを監視しアバターの変更,リセット,ワールド移動を検知できるようになりました
-VRChatを再起動しても最新のログファイルを追跡するようになりました
-ログファイルに変更があった場合データ更新が行われるように修正
-処理を始める際のEnter入力を削除しました
-実装手順の一部を修正

〇2022/08/28 【Beta v2.0.1】
-一部のアニメーションがMissingになっていた問題を修正

〇2022/09/03 【Beta v2.1.0】
-unitypackage内にEditorを含めました
-オブジェクトのセットアップをunity拡張で自動化しました
-テスト用アプリケーションを同梱しました
-VRChatからのOSCを閲覧できるアプリケーションを同梱しました
-VRChatのOSCファイルを削除するアプリケーションを同梱しました
-Sit判定に座った際、Animatorがリセットされる問題を回避
-VRChat Creator Companion に暫定対応

〇2022/09/10 【Beta v2.1.1】
-2時間以上同じインスタンスに滞在した時に、人数表示がおかしくなるバグを修正

【開発環境】----------------------------

-Windows 10 Home 21H1 Build 19041-SP0
-Python 3.8.2
-python-osc 1.8.0
-PyInstaller 4.9
-Adobe Illustrator 2022

